<!DOCTYPE html>
<html lang="ms">
<head>
    
    <meta name="tags" content="git" />
    <meta name="tags" content="svn" />
    <meta name="tags" content="version control" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>
    <link rel="stylesheet" href="http://blog.xoxzo.com/ms/theme/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://blog.xoxzo.com/ms/theme/css/main.css">
    <link rel="stylesheet" href="http://blog.xoxzo.com/ms/theme/css/pygment.css">

    <link href="http://blog.xoxzo.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title=" Full Atom Feed" />

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>
    <nav class="navbar navbar-fixed-top navbar-dark bg-inverse">
        <div class="container">
            <a class="navbar-brand" href="http://blog.xoxzo.com/ms">
                <img src="http://blog.xoxzo.com/ms/theme/images/xoxzo_navbar_logo_w_trans.png">
                <span>BLOG</span>
            </a>
            <button class="navbar-toggler hidden-sm-up float-xs-right" type="button" data-toggle="collapse" data-target="#collapsingNav" aria-controls="collapsingNav" aria-expanded="false" aria-label="Toggle navigation"></button>
            <div class="collapse navbar-toggleable-xs" id="collapsingNav">
                <ul class="nav navbar-nav float-xs-left float-sm-right">
                <!--
                    <li class="nav-item"><a class="nav-link " 
                    href="http://blog.xoxzo.com/ms/pages/we-are-xoxzo/">Who We Are</a></li>
                -->
                    <li class="nav-item">
                    <a class="nav-link" href="http://info.xoxzo.com">Who We Are</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://twitter.com/xoxzotelephony">Twitter</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>


<div class="with-sidebar">
    <main class="container">
        <div class="row">
            <section class="content col-md-8 col-lg-9 float-md-right">
                <div class="container">
                    <article>
                        <h2 class="article-info">
                            2012-03-09 /
                            <a href="http://blog.xoxzo.com/ms/category/engineering.html">Engineering</a>
                        </h2>
                        <h1 class="article-title">Svn stash</h1>
                        <p class="article-author">By
                            <a href="http://blog.xoxzo.com/ms/author/kamal-mustafa.html">Kamal Mustafa</a>
                            <br>
                            
                        </p>
                        <hr>
                        <div class="article-content">
                          <p>Update 2012-05-02 - Add new use-case when merging from trunk.</p>
<hr />
<p>One thing I like in git is the <code>stash</code> command. Basically what it's
doing is<br />
to take out current changes that we have, store it in temporary place
and then<br />
revert our repo to it's previous pristine state. This has a number of
use cases.<br />
Let say you're working on some features and then got some bug report
that need<br />
to be fixed quickly. You may do new checkout in other location and do
the bug<br />
fixing work, commit it and then continue on your new features work. This
may not<br />
really prevalent if you work in branch since the bug might need to be
fixed in<br />
another branch. <code>git branch</code> does the job here since it allow you to
quickly<br />
switch branch.</p>
<p>Now back to us who still stuck with svn. Nothing wrong with svn, it does
the work<br />
and 99% of the time we're happy with it. There's another use case than I
mentioned<br />
just now. Supposed while working on the new features, you found a bug.
It may be<br />
just 1 line fix and you don't want the fix end up with features you're
working on<br />
currently. With svn, you have few options:-</p>
<ul>
<li>Do new checkout in another directory, fix the bug and commit.</li>
<li><code>svn diff &gt; tmp.diff</code>, <code>svn revert -R .</code>, fix the bug and commit,
    <code>patch -p0 &lt; tmp.diff</code></li>
</ul>
<p>Second option not really nice solution if you have lot of newly added
files and<br />
you want to have clean environment in order to test the bug fixes. You
have to<br />
manually copy all the files to some other place. So I search around for
'svn stash'<br />
and luckily there's few others who'd also thinking about 'svn stash'.
<a href="http://www.blisted.org/blog/bin/svn/stash">There's one<br />
that look complete</a>, from a
guy named scott (can't find any more details) so I<br />
give it a try. The script work quite well, it named as <code>svn</code>, just put
somewhere<br />
under your <code>$PATH</code>, make sure it come first before the usual path such
as <code>/usr/bin</code><br />
or <code>/usr/local/bin</code>. The script basically a wrapper to actually svn
executable,<br />
it contains few additonal commands and if none match, it just forward
that to the real svn.</p>
<p>Scott's blog have enough explanation on how to use the script so I won't
repeat it<br />
here. Basically the flow are:-</p>
<ul>
<li><code>svn stash</code></li>
<li>... fix bug etc</li>
<li><code>svn commit</code></li>
<li><code>svn stash list</code></li>
<li><code>svn stash pop</code> or <code>svn stash apply &lt;stash-name&gt;</code> - pop will remove
    the stash while <code>apply</code> will keep it.</li>
</ul>
<p>Another useful use-case is when working on branch. While in the middle
of your work on the branch, you might want to merge latest changes from
trunk. It always good practice to merge into a clean working directory
rather than have the changes from merge mix your current uncommitted
work. You may not ready yet to commit your current changes. With <code>stash</code>
command you can 'stash' the current changes, merge latest changes from
trunk, commit, reapply the stash and continue to work:-</p>
<div class="highlight"><pre><span></span>kamal@sms:~/marimore_sms/branches/381-reset-count
$ svn status
M       lib/py/mamoprivate/sms/__init__.py
M       bin/sendsmsd
kamal@sms:~/marimore_sms/branches/381-reset-count
$ svn stash
Reverted &#39;lib/py/mamoprivate/sms/__init__.py&#39;
Reverted &#39;bin/sendsmsd&#39;
Changes stashed as: &quot;4d51a3eb-3a16-4e63-89e7-09e74cd30d91&quot;
Working copy reverted to 129
kamal@sms:~/marimore_sms/branches/381-reset-count
$ svn status
kamal@sms:~/marimore_sms/branches/381-reset-count
$ svn merge ../../trunk/
--- Merging r129 through r132 into &#39;.&#39;:
U    lib/py/mamoprivate/d/projects/sms/settings.py
M       lib/py/mamoprivate/d/projects/sms/settings.py
kamal@sms:~/marimore_sms/branches/381-reset-count
$ svn ci -m &#39;merge latest trunk, refs #381&#39;
Sending        381-reset-count
Sending        381-reset-count/lib/py/mamoprivate/d/projects/sms/settings.py
Transmitting file data .
Committed revision 133.
kamal@sms:~/marimore_sms/branches/381-reset-count
$ svn stash list
1637 2012-05-02 13:56 4d51a3eb-3a16-4e63-89e7-09e74cd30d91
kamal@sms:~/marimore_sms/branches/381-reset-count
$ svn stash pop 4d51a3eb-3a16-4e63-89e7-09e74cd30d91
pop: 4d51a3eb-3a16-4e63-89e7-09e74cd30d91
Unstaging stash &quot;4d51a3eb-3a16-4e63-89e7-09e74cd30d91&quot;.
M       lib/py/mamoprivate/sms/__init__.py
M       bin/sendsmsd
Stash &quot;4d51a3eb-3a16-4e63-89e7-09e74cd30d91&quot; removed.
kamal@sms:~/marimore_sms/branches/381-reset-count
$ svn status
M       lib/py/mamoprivate/sms/__init__.py
M       bin/sendsmsd
</pre></div>


<p>It also have some other goodies but I haven't try any of them. The
script also show<br />
a creative way to provide 'plugins' to a command that do not natively
support plugin.<br />
I might apply the same technique to other command. I have in mind to
override the<br />
svn commit command to provide some kind pre-commit hook that run the
code through<br />
static code checker before commiting. We're using Unfuddle so no chance
for us to use<br />
the native svn pre-commit hook. Lastly, thanks to
<a href="http://www.blisted.org/">scott</a> for such useful script.</p>
                        </div>
                        <div class="article-tag">
                            <a href="http://blog.xoxzo.com/ms/tag/git.html">
                                <span class="btn btn-tag btn-sm">git</span>
                            </a>
                            <a href="http://blog.xoxzo.com/ms/tag/svn.html">
                                <span class="btn btn-tag btn-sm">svn</span>
                            </a>
                            <a href="http://blog.xoxzo.com/ms/tag/version-control.html">
                                <span class="btn btn-tag btn-sm">version control</span>
                            </a>
                        </div>
                    </article>
                </div>
            </section>

<section class="sidebar col-md-4 col-lg-3">
    <div class="container">
        <div class="sidebar-menu">
            <h3>CATEGORIES</h3>
            <ul>
                <li><a href="http://blog.xoxzo.com/ms/category/engineering.html">Engineering</a></li>
                <li><a href="http://blog.xoxzo.com/ms/category/engineering-python.html">Engineering, Python</a></li>
                <li><a href="http://blog.xoxzo.com/ms/category/events.html">Events</a></li>
                <li><a href="http://blog.xoxzo.com/ms/category/fullcourt.html">FullCourt</a></li>
                <li><a href="http://blog.xoxzo.com/ms/category/new-release-xoxzo.html">New Release, Xoxzo</a></li>
                <li><a href="http://blog.xoxzo.com/ms/category/pr.html">PR</a></li>
                <li><a href="http://blog.xoxzo.com/ms/category/the-way-we-work.html">The Way We Work</a></li>
                <li><a href="http://blog.xoxzo.com/ms/category/use-cases.html">Use Cases</a></li>
            </ul>
        </div>
        <div class="sidebar-menu">
            <h3>TAGS</h3>
            <ul>
                <li><a href="http://blog.xoxzo.com/ms/tag/adit.html">adit</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/api.html">API</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/audio.html">audio</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/aws.html">aws</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/browsers.html">browsers</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/class-based-views.html">class based views</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/connexionnexus.html">connexion@nexus</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/costs.html">costs</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/developer.html">developer</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/distribute.html">distribute</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/django.html">django</a> (7)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/django-views.html">django views</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/djangogirls.html">djangogirls</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/dns.html">dns</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/dong-jing.html">東京</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/easy_install.html">easy_install</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/ecsaito.html">ECサイト</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/email.html">email</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/event.html">event</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/exhibition.html">exhibition</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/ezsms.html">ezsms</a> (6)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/fullcourt.html">fullcourt</a> (2)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/ge-ren-qing-bao.html">個人情報</a> (2)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/generic-views.html">generic views</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/git.html">git</a> (2)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/github.html">github</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/hatten-hotel.html">hatten hotel</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/he-jie.html">和解</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/html5.html">html5</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/ivr.html">ivr</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/jomlaunch.html">jomlaunch</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/kof.html">kof</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/kuala-lumpur.html">kuala lumpur</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/ma.html">m&a</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/malacca.html">malacca</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/malaysia.html">malaysia</a> (3)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/marimore.html">marimore</a> (3)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/medeianetsutowakusabisu.html">メディアネットワークサービス</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/my.html">my</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/nomad.html">nomad</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/open-source.html">open source</a> (3)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/osaka.html">osaka</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/oss.html">oss</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/php.html">php</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/pip.html">pip</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/pmaku.html">pマーク</a> (2)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/pr.html">pr</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/puraibashimaku.html">プライバシーマーク</a> (2)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/puresuririsu.html">プレスリリース</a> (3)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/pycon.html">pycon</a> (3)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/pycon-au.html">pycon au</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/pycon-au-2015.html">pycon au 2015</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/pypi.html">pypi</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/python.html">python</a> (12)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/remote.html">remote</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/ren-ding.html">認定</a> (2)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/ren-zheng.html">認証</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/ruby.html">ruby</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/sabisuzhong-liao.html">サービス終了</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/scm.html">scm</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/seminar.html">seminar</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/setuptools.html">setuptools</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/shiyotometsusezi.html">ショートメッセージ</a> (4)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/sms.html">sms</a> (2)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/smsnoapipei-xin.html">smsのapi配信</a> (2)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/spf.html">spf</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/su-song.html">訴訟</a> (2)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/subversion.html">subversion</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/svn.html">svn</a> (2)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/talk.html">talk</a> (2)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/te-xu.html">特許</a> (2)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/team-camp.html">team camp</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/tech.html">tech</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/telephony.html">telephony</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/tips.html">tips</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/tokyo.html">tokyo</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/tong-zhi-bu-zhu-shou-duan.html">通知補助手段</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/transaction.html">transaction</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/use-cases.html">use cases</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/vacancy.html">vacancy</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/version-control.html">version control</a> (3)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/voice-and-sms-api.html">voice and sms api</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/wing-sms.html">wing-sms</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/workshop.html">workshop</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/xi-dai-dian-hua.html">携帯電話</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/xoxzo.html">xoxzo</a> (3)</li>
                <li><a href="http://blog.xoxzo.com/ms/tag/zenlokzhu-shi-hui-she.html">zenlok株式会社</a> (2)</li>
            </ul>
        </div>
        <div class="sidebar-menu">
            <h3>SEARCH</h3>
            <input type="text" class="form-control" placeholder="Search">
        </div>
    </div>
</section>
        </div>
    </main>
</div>

    <footer>
        <div class="container text-center">
            <p>© 2016 Xoxzo Inc. All rights reserved.</p>
            <p>Powered by <a href="http://getpelican.com/">Pelican</a></p>
        </div>
    </footer>
    <script src="http://blog.xoxzo.com/ms/theme/js/jquery.min.js"></script>
    <script src="http://blog.xoxzo.com/ms/theme/js/tether.min.js"></script>
    <script src="http://blog.xoxzo.com/ms/theme/js/bootstrap.min.js"></script>
    <script src="http://blog.xoxzo.com/ms/theme/js/jquery.matchHeight.js"></script>

    <script type="text/javascript">
        $(function() {
            $('.with-sidebar section').matchHeight();
        });
    </script>
</body>
</html>