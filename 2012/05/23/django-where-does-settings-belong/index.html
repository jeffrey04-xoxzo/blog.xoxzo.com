<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="t4rlWAOKliFFgziLhYYxEpNtIh_W-794Po7iuYIL__Q" />

  

  <meta name="tags" content="django">
  <meta name="tags" content="Python">
  <meta property="og:type" content="article">
  <meta property="og:title" content="Django: Where does settings belong ?">
  <meta property="og:description" content="Settings is very central to all Django applications. Django even barf if you don't supply one and import any django modules or functions (most of it). The way to specify settings to Django app however a bit awkward. Rather calling some function and pass the settings to that function, Django …">
  <meta property="og:url" content="http://blog.xoxzo.com/2012/05/23/django-where-does-settings-belong/">
  <meta property="og:site_name" content="Xoxzo Official Blog: Empowerment">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@xoxzotelephony">
  <meta name="twitter:title" content="Django: Where does settings belong ?">
  <meta name="twitter:description" content="Settings is very central to all Django applications. Django even barf if you don't supply one and import any django modules or functions (most of it). The way to specify settings to Django app however a bit awkward. Rather calling some function and pass the settings to that function, Django …">

    <title>Xoxzo Official Blog: Empowerment</title>
    <link rel="icon" href="http://blog.xoxzo.com/theme/images/xoxzo_16x16_favicon.png">

    <link rel="stylesheet" href="http://blog.xoxzo.com/theme/css/bootstrap.min.css">
    <link href="http://blog.xoxzo.com/theme/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="http://blog.xoxzo.com/theme/css/main.css">
    <link rel="stylesheet" href="http://blog.xoxzo.com/theme/css/pygment.css">

    <link href="http://blog.xoxzo.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Xoxzo Official Blog: Empowerment - Full RSS Feed">
    <link href="http://blog.xoxzo.com/feeds/all-en.rss.xml" type="application/rss+xml" rel="alternate" title="Xoxzo Official Blog: Empowerment - English Article RSS Feed">
    <link href="http://blog.xoxzo.com/feeds/all-ja.rss.xml" type="application/rss+xml" rel="alternate" title="Xoxzo Official Blog: Empowerment - Japanese Article RSS Feed">
    <link href="http://blog.xoxzo.com/feeds/engineering.rss.xml" type="application/rss+xml" rel="alternate" title="Xoxzo Official Blog: Empowerment - Engineering Category RSS Feed">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body class="non-sticky-footer">
    <nav class="navbar navbar-fixed-top navbar-dark bg-inverse">
        <div class="container">
            <a class="navbar-brand" href="http://blog.xoxzo.com">
                <img src="http://blog.xoxzo.com/theme/images/xoxzo_navbar_logo_w_trans.png">
                <span>BLOG</span>
            </a>
            <button class="navbar-toggler hidden-md-up float-xs-right" type="button" data-toggle="collapse" data-target="#collapsingNav" aria-controls="collapsingNav" aria-expanded="false" aria-label="Toggle navigation"></button>
            <div class="collapse navbar-toggleable-sm" id="collapsingNav">
                <ul class="nav navbar-nav float-xs-left float-md-right">
                <!--
                    <li class="nav-item"><a class="nav-link "
                    href="http://blog.xoxzo.com/pages/we-are-xoxzo/">Who We Are</a></li>
                -->
                    <li class="nav-item">
                        <a class="nav-link" href="https://info.xoxzo.com/en/" target="_blank"><i class="fa fa-home" aria-hidden="true"></i> Who We Are</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://twitter.com/xoxzotelephony" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i> Twitter</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="http://blog.xoxzo.com/feeds/all.rss.xml" target="_blank"><i class="fa fa-rss-square" aria-hidden="true"></i> Blog Feed</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-globe" aria-hidden="true"></i>
                            Language&nbsp;
                            <span class="caret"></span>
                        </a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="/en/">English</a>
                            <a class="dropdown-item" href="/ja/">日本語</a>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    
<div class="with-sidebar">
    <main class="container">
        <div class="row">
            <section class="content col-md-8 col-lg-9 float-md-right">
                <div class="container">
                    <article>
                        <h2 class="article-info">
                            2012-05-23 /
                            <a href="http://blog.xoxzo.com/engineering/">Engineering</a>
                        </h2>
                        <h1 class="article-title">Django: Where does settings belong ?</h1>
                        <p class="article-author">By                            <a href="http://blog.xoxzo.com/author/kamal-mustafa.html">Kamal Mustafa</a>
                            <br>
                            
                        </p>
                        <hr>
                        <div class="article-content">
                          <p>Settings is very central to all Django applications. Django even barf if
you<br>
don't supply one and import any django modules or functions (most of
it). The<br>
way to specify settings to Django app however a bit awkward. Rather
calling<br>
some function and pass the settings to that function, Django require you
to put<br>
the path to settings module in os.environ dict. Consider a Flask
application:-</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">hello_world</span><span class="p">():</span>
<span class="k">return</span> <span class="s1">&#39;Hello World!&#39;</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>


<p>It feels natural. You instantiate an app, call it's run() method and
pass<br>
<code>debug</code> as parameter to the function. It's easy to explain. Or if Flask
not<br>
your favourite, let's take a look at Bottle example:-</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bottle</span> <span class="kn">import</span> <span class="n">route</span><span class="p">,</span> <span class="n">run</span>
<span class="nd">@route</span><span class="p">(</span><span class="s1">&#39;/hello&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
<span class="k">return</span> <span class="s2">&quot;Hello World!&quot;</span>
<span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">8080</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>


<p>It still maintain the same flow. But let's look at how we pass settings
to<br>
Django app. This is what you get in default <code>manage.py</code> generated by<br>
<code>django-admin.py startproject</code> command:-</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;DJANGO_SETTINGS_MODULE&#39;</span><span class="p">,</span> <span class="s1">&#39;myapp.settings&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="kn">from</span> <span class="nn">django.core.management</span> <span class="kn">import</span> <span class="n">execute_from_command_line</span>
<span class="n">execute_from_command_line</span><span class="p">()</span>
</pre></div>


<p>Compared to example for other 2 frameworks, the logic now seem to branch
into 2<br>
separate paths. First you have to figure out what is going on with<br>
<code>os.environ.setdefault()</code> stuff, and then the stuff with<br>
<code>execute_from_command_line()</code>. Enough to confuse beginner. Only later on
I<br>
figured out that you can actually skip <code>os.environ</code> stuff and directly
set<br>
settings as you wish. The above example can be re-written as:-</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="n">settings</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">DEBUG</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="kn">from</span> <span class="nn">django.core.management</span> <span class="kn">import</span> <span class="n">execute_from_command_line</span>
<span class="n">execute_from_command_line</span><span class="p">()</span>
</pre></div>


<p>Now it look more like the other 2 frameworks. This however not much an
issue,<br>
because once your application grow, you'll definitely want to put your
settings<br>
in one central place and could be the reason why Django has made that
decision<br>
for you early on. The real issue is where should we put the central
settings ?</p>
<p>Django settings, being a pure python module mean it has to be somewhere
on your<br>
<code>sys.path</code> so Django can import it to initialize the application.
Logically I<br>
want the settings for <code>myapp</code> to appear as <code>myapp.settings</code>. This
however would<br>
make the settings now part of the application. But settings suppose to
have<br>
some piece of information that will be used to create and initialized
the<br>
application (ROOT_URLCONF come to mind) but now the settings itself
already<br>
part of the application. I've repeated the word application too much in
last<br>
sentence.</p>
<p>One situation when this chicken-and-egg manifest. I want to deploy my
app using<br>
<code>setup.py</code> which mean <code>myapp</code> will be installed in <code>site-packages</code>. That
also<br>
mean <code>settings.py</code> will also reside in <code>site-packages</code>. But for web
application<br>
there are more than just python code. There should be a directory to
store<br>
uploaded files or csv files for some external data. I want to keep all
this in<br>
a self contained project directory but since now <code>myapp.settings</code> reside
in<br>
<code>site-packages</code> I'm losing the ability to calculate the path to my
project dir<br>
at run time. While I can compensate this by having a standardized
location on<br>
production machine, I'd still want to keep this in one single project
dir for<br>
development so each developers work doesn't step into each other and
also for<br>
portabilty of development environment.</p>
<p>The only way now is to not installing <code>myapp</code> into <code>site-packages</code> but
altering<br>
sys.path to add path to the directory containing <code>myapp</code> package. Some
of open<br>
source django project I found put <code>settings.py</code> outside the app
packages,<br>
usually at the same level of <code>manage.py</code> or <code>.wsgi</code> script used to
launch the<br>
app. They then specify the settings as
<code>os.environ['DJANGO_SETTINGS_MODULE'] = 'settings'</code>. This make settings
external to the application but at the same time<br>
exposed <code>settings</code> into the global namespace. While I haven't yet found
any<br>
packages at PyPI using the name <code>settings</code>, it still doesn't feel right.</p>
<p>I take a look at how settings are handled in Pylons/Pyramid project. Few
things<br>
observed:-</p>
<ul>
<li>They use INI files instead of pure python.</li>
<li>The INI files are placed at the top level of project directory.</li>
<li>Application get installed into <code>site-packages</code> using setup.py</li>
<li>Since settings stayed in project dir, you still get referenced to
    the project<br>
   dir even your app get installed into <code>site-packages</code>.</li>
</ul>
<p>While it look quite similar to placing <code>settings.py</code> at your project
root, the<br>
INI files is not python module so there's no problem of exposing the
settings<br>
into global namespace. The settings now also look truely external to
the<br>
application. This has getting quite long but still the question
remained<br>
unanswered, where should we put the settings file ?</p>
                        </div>
                        <div class="article-tag">
                            <a href="http://blog.xoxzo.com/tag/django/">
                                <span class="btn btn-tag btn-sm">django</span>
                            </a>
                            <a href="http://blog.xoxzo.com/tag/python/">
                                <span class="btn btn-tag btn-sm">Python</span>
                            </a>
                        </div>
                    </article>
                </div>
            </section>

<section class="sidebar col-md-4 col-lg-3">
    <div class="container">
        <div class="sidebar-menu">
            <h3>CATEGORIES</h3>
            <ul>
                <li><a href="http://blog.xoxzo.com/announcements/">Announcements</a></li>
                <li><a href="http://blog.xoxzo.com/community/">Community</a></li>
                <li><a href="http://blog.xoxzo.com/engineering/">Engineering</a></li>
                <li><a href="http://blog.xoxzo.com/events/">Events</a></li>
                <li><a href="http://blog.xoxzo.com/fullcourt/">FullCourt</a></li>
                <li><a href="http://blog.xoxzo.com/new-release-xoxzo/">New Release, Xoxzo</a></li>
                <li><a href="http://blog.xoxzo.com/pr/">PR</a></li>
                <li><a href="http://blog.xoxzo.com/the-way-we-work/">The Way We Work</a></li>
            </ul>
        </div>
        <div class="sidebar-menu">
            <h3>TAGS</h3>
            <ul>
                <li><a href="http://blog.xoxzo.com/tag/10-years/">10 years</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/2016/">2016</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/2017/">2017</a> (2)</li>
                <li><a href="http://blog.xoxzo.com/tag/24-hours/">24 hours</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/audio/">audio</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/authentication/">authentication</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/aws/">aws</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/browsers/">browsers</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/class-based-views/">class based views</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/community/">community</a> (2)</li>
                <li><a href="http://blog.xoxzo.com/tag/connexionnexus/">connexion@nexus</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/costs/">costs</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/credits/">credits</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/developer/">developer</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/dial-in-numbers/">dial in numbers</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/din/">din</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/distribute/">distribute</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/django/">django</a> (7)</li>
                <li><a href="http://blog.xoxzo.com/tag/django-views/">django views</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/djangogirls/">djangogirls</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/dns/">dns</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/dong-jing/">東京</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/downtime/">downtime</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/easy_install/">easy_install</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/email/">email</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/endofservice/">endofservice</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/eol/">eol</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/eoy-notice/">EOY-notice</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/event/">event</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/exhibition/">exhibition</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/fullcourt/">fullcourt</a> (2)</li>
                <li><a href="http://blog.xoxzo.com/tag/generic-views/">generic views</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/git/">git</a> (2)</li>
                <li><a href="http://blog.xoxzo.com/tag/github/">github</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/goodbye/">goodbye</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/happy-birthday/">happy birthday</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/hatten-hotel/">hatten hotel</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/html5/">html5</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/ivr/">ivr</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/jomlaunch/">jomlaunch</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/kof/">kof</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/kuala-lumpur/">kuala lumpur</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/kumamoto/">kumamoto</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/ma/">m&a</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/malacca/">malacca</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/malaysia/">malaysia</a> (3)</li>
                <li><a href="http://blog.xoxzo.com/tag/marimore/">marimore</a> (3)</li>
                <li><a href="http://blog.xoxzo.com/tag/maritex/">maritex</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/my/">my</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/new-release/">new release</a> (2)</li>
                <li><a href="http://blog.xoxzo.com/tag/nomad/">nomad</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/open-source/">open source</a> (3)</li>
                <li><a href="http://blog.xoxzo.com/tag/osaka/">osaka</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/osc/">osc</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/oss/">oss</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/php/">php</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/pip/">pip</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/pr/">pr</a> (2)</li>
                <li><a href="http://blog.xoxzo.com/tag/price/">price</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/price-review/">Price Review</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/pycon/">pycon</a> (4)</li>
                <li><a href="http://blog.xoxzo.com/tag/pycon-au/">pycon au</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/pycon-au-2015/">pycon au 2015</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/pyconmy/">pyconmy</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/pypi/">pypi</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/python/">python</a> (15)</li>
                <li><a href="http://blog.xoxzo.com/tag/remote/">remote</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/ruby/">ruby</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/scm/">scm</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/seminar/">seminar</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/setuptools/">setuptools</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/spf/">spf</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/sponsor/">sponsor</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/subversion/">subversion</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/svn/">svn</a> (2)</li>
                <li><a href="http://blog.xoxzo.com/tag/talk/">talk</a> (2)</li>
                <li><a href="http://blog.xoxzo.com/tag/team-camp/">team camp</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/tech/">tech</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/telephony/">telephony</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/text-to-speech/">text-to-speech</a> (2)</li>
                <li><a href="http://blog.xoxzo.com/tag/tips/">tips</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/tokyo/">tokyo</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/transaction/">transaction</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/tts/">TTS</a> (3)</li>
                <li><a href="http://blog.xoxzo.com/tag/vacancy/">vacancy</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/version-control/">version control</a> (3)</li>
                <li><a href="http://blog.xoxzo.com/tag/voice-and-sms-api/">voice and sms api</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/workshop/">workshop</a> (1)</li>
                <li><a href="http://blog.xoxzo.com/tag/xoxzo/">xoxzo</a> (4)</li>
            </ul>
        </div>
    </div>
</section>
        </div>
    </main>
</div>

    <footer>
        <div class="container text-center">
            <p>© 2017 Xoxzo Inc. All rights reserved.</p>
            <p>Powered by <a href="http://getpelican.com/">Pelican</a></p>
        </div>
    </footer>
    <script src="http://blog.xoxzo.com/theme/js/jquery.min.js"></script>
    <script src="http://blog.xoxzo.com/theme/js/tether.min.js"></script>
    <script src="http://blog.xoxzo.com/theme/js/bootstrap.min.js"></script>
    <script src="http://blog.xoxzo.com/theme/js/jquery.matchHeight.js"></script>

    <script type="text/javascript">
        $(function() {
            $('.with-sidebar section').matchHeight();
        });
    </script>

    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
            Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-67735042-7', 'auto');
        ga('send', 'pageview');
    </script>


</body>
</html>